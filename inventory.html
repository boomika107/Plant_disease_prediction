{% extends "base.html" %}

{% block title %}Inventory - {{ super() }}{% endblock %}

{% block content %}
<div class="main-container">
  <div class="hero">
    <div class="hero-title">ðŸ“¦ Farm Inventory</div>
    <p class="hero-subtitle">Manage your fertilizers, pesticides, and other stock.</p>
  </div>

  <div class="dashboard-grid">
    <div class="card dashboard-widget" style="min-height: 0;">
      <h3>Add New Resource</h3>
      <form method="POST" action="{{ url_for('inventory') }}">
        <div style="margin-bottom: var(--space-3);">
          <label for="name" style="font-weight: 700; display: block; margin-bottom: var(--space-1);">Resource Name (Required)</label>
          <input type="text" id="name" name="name" required placeholder="e.g., Brand-X Copper Fungicide"
                 style="width: 100%; padding: var(--space-2); border-radius: var(--r-sm); border: 1px solid var(--border); background: var(--bg-3); color: var(--fg); font-size: 1rem;">
        </div>
        
        <div style="margin-bottom: var(--space-3);">
          <label for="category" style="font-weight: 700; display: block; margin-bottom: var(--space-1);">Category (Required)</label>
          <select id="category" name="category" required style="width: 100%; padding: var(--space-2); border-radius: var(--r-sm); border: 1px solid var(--border); background: var(--bg-3); color: var(--fg); font-size: 1rem;">
            <option value="Pesticide">Pesticide / Fungicide</option>
            <option value="Fertilizer">Fertilizer</option>
            <option value="Seed">Seed</option>
            <option value="Other">Other</option>
          </select>
        </div>

        <div style="margin-bottom: var(--space-4);">
          <label for="quantity" style="font-weight: 700; display: block; margin-bottom: var(--space-1);">Quantity (Optional)</label>
          <input type="text" id="quantity" name="quantity" placeholder="e.g., 5 bags, 2.5L, Low stock"
                 style="width: 100%; padding: var(--space-2); border-radius: var(--r-sm); border: 1px solid var(--border); background: var(--bg-3); color: var(--fg); font-size: 1rem;">
        </div>
        
        <button type="submit" class="submit-button" style="width: 100%;">+ Add to Inventory</button>
      </form>
    </div>

    <div class="card dashboard-widget">
      <h3>Current Stock</h3>
      {% if resources %}
        <ul class="task-list">
          {% for resource in resources %}
            <li style="display: flex; justify-content: space-between; align-items: center;">
              <div>
                <strong>{{ resource.name }}</strong>
                <small>Category: {{ resource.category }} | Quantity: {{ resource.quantity or 'N/A' }}</small>
              </div>
              <form action="{{ url_for('delete_resource', resource_id=resource.id) }}" method="POST" style="flex-shrink: 0; margin-left: var(--space-2);">
                <button type="submit" onclick="return confirm('Are you sure you want to delete this item?');"
                        style="background: none; border: none; color: var(--danger); font-weight: 700; cursor: pointer; font-size: 0.9rem; padding: 8px;">
                  Delete
                </button>
              </form>
            </li>
          {% endfor %}
        </ul>
      {% else %}
        <p class="def-info" style="margin: auto 0;">Your inventory is empty.</p>
      {% endif %}
    </div>
  </div>

</div>
{% endblock %}
